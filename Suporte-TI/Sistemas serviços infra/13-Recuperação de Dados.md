# O que é recuperação de dados

A recuperação de dados, em termos gerais, é o processo de tentar restaurar dados depois de um evento inesperado que resulte em perda ou corrupção de dados. Talvez um equipamento que contenha dados tenha sido fisicamente danificado, um hacker tenha praticado ações prejudiciais ou um malware tenha excluído dados críticos. Seja qual for a causa, o efeito é o mesmo. De repente, você perde dados muito importantes e precisa descobrir como recuperá-los. A forma de tentar restaurar os dados perdidos depende de alguns fatores. Um deles é a natureza dos dados perdidos.

Se o equipamento foi danificado, pode ser possível recuperar dados do hardware danificado. Pode ser necessário usar um software de recuperação de dados para analisar discos ou pen-drives , tentando localizar e extrair arquivos de dados. Outro fator que afetaria a recuperação de dados é a existência de backups. Se você tiver sorte ou estiver preparado para o inesperado, você terá um backup dos dados e poderá restaurar os dados que foram perdidos. A recuperação de dados é uma parte importante de um sistema ou organização de TI. Como os dados são componentes críticos de qualquer operação comercial, enquanto especialista de TI, sua função é garantir que esses dados estejam disponíveis e protegidos contra corrupção ou perda. Assim, se algo der errado, a empresa poderá continuar suas operações comerciais com interrupções mínimas. É por isso que é fundamental conseguir se recuperar de eventos inesperados que possam impactar seus dados comerciais.

Quando um evento inesperado ocorre, seu objetivo deve ser retomar as operações normais o mais rápido possível, reduzindo a interrupção no funcionamento da empresa.

Uma das técnicas mais importantes que você vai aprender é a fazer um backup dos seus dados. A melhor maneira de estar preparado para uma perda de dados é ter em vigor um plano de desastres e procedimentos bem-pensados em vigor. Os planos de desastres devem envolver backups regulares de todos os dados críticos necessários para os processos comerciais em andamento.

Trata-se de dados de clientes, bancos de dados dos sistemas, configurações dos sistemas e dados financeiros. Por fim, você aprenderá mais sobre o pessoal da TI chama de **post-mortem**. Imagine que algo tenha dado errado com seus sistemas e você teve que usar o plano de desastre. Você pode acabar descobrindo problemas ao recuperar seus dados que não estavam abrangidos pelo plano de desastre. O post-mortem é uma maneira de documentar qualquer problema que você descobrir durante o percurso e, o mais importante, a maneira como os consertou, assim você pode garantir que eles não ocorram novamente. Estar despreparado para uma grande perda de dados impacta severamente as empresas.

## Fazendo backup dos dados

A primeira coisa a descobrir é de quais dados você precisa fazer backup. Em um mundo perfeito, você só deveria fazer backup dos dados absolutamente necessários para as operações e que não podem ser encontrados em outra fonte. Então, coisas como e-mails, bancos de dados de vendas, planilhas financeiras, configurações de servidores e bancos de dados, tudo isso deve estar incluído. Mas e os downloads que você fez no laptop? É realmente necessário fazer backup de todas essas fotos de gatos também? Provavelmente não. O backup de dados não sai de graça. Cada arquivo adicional do qual você faz backup ocupa mais de espaço no disco, aumentando os custos gerais da sua solução de backup.

Depois de descobrir de quais dados você deseja fazer backup, você deve descobrir a quantidade de dados que você tem atualmente. Mas não basta apenas pensar nas exigências de armazenamento de backup do momento atual apenas. Sua empresa pode continuar crescendo e suas necessidades de backup devem acompanhar. Não deixe de contabilizar o crescimento futuro e escolha uma solução com flexibilidade para acomodar facilmente as ampliações dos backups de dados. Os dados podem ser copiados localmente para sistemas do local ou os dados de backup podem ser enviados para sistemas remotos. As duas abordagens têm pontos positivos e negativos e ajuda a reduzir riscos diferentes.

A vantagem das soluções de backup no local é que os dados estão fisicamente muito próximos. Isso torna o acesso aos dados muito mais rápido. Você não precisará de muita largura de banda, pois não estará enviando dados para fora da sua rede interna. Se você precisar restaurar dados dos backups, isso vai acontecer muito rapidamente, já que os dados estão próximos. Mas e se um dos eventos inesperados for um incêndio? Os sistemas de que estávamos fazendo backup juntamente com o servidor de backup foram perdidos no incêndio. Vixe! Perdemos tudo. É por isso que os backups externos são altamente recomendados. Trata-se de fazer backups dos dados críticos enviá-los para sistemas remotos em um local físico diferente. Pode ser outro servidor de backup que você controla em um escritório diferente ou um serviço de backup na nuvem. Mas há prós e contras. Os backups externos nos preparam melhor para eventos catastróficos que podem arruinar dados de todo o escritório, mas enviar dados para fora do seu local significa que você precisará transmitir os dados para fora da sua rede. Isso quer dizer que você terá que considerar elementos como criptografia e largura de banda. Sua conexão com a Internet será usada para transmitir os dados de backup. Dependendo da quantidade de dados que você for enviar e da velocidade de sua conexão com a Internet, pode levar muito tempo.

Outra coisa importante a considerar é a criptografia dos backups. Como os backups geralmente êm dados comerciais confidenciais e sigilosos, é importante que os dados sejam tratados com segurança e armazenados de uma forma que impeça acessos não autorizados. Ao enviar dados para fora do seu local, é muito importante ter a certeza de que os dados estão sendo transmitidos com segurança, preferencialmente criptografados via TNS. Mas isso não é tudo. Os dados de backup armazenados também devem ser criptografados em repouso. É uma precaução comum na área.

### Solucões de backup

Mas como escolher entre um backup feito por você mesmo ou um dos muitos provedores de nuvem? Bem, vamos começar vendo os prós e contras dos dois. Os backups no local, ou auto gerenciados, podem ser feitos comprando-se um dispositivo NAS, carregando-o com vários discos rígidos e enviando os dados para ele pela rede. Isso até que funcionaria, mas não seria a melhor solução em longo prazo. Como você aumentaria a capacidade do disco quando precisasse de mais espaço de armazenamento? Como você lidaria com falhas nos discos rígidos? Porque os discos rígidos sempre podem falhar. A propósito, é importante dizer que essas opções não se excluem. Não há nada que o impeça de fazer tanto um backup local como um backup externo. Na verdade, é recomendável incluir os dois se o orçamento da sua organização permitir.

Uma coisa que você deve considerar ao avaliar a estratégia de backup para uma organização é o período de backup. Por quanto tempo você precisa manter os backups? Essa resposta impactará suas necessidades de armazenamento em longo prazo e os custos gerais para manter seu sistema de backup.

Uma abordagem, que equilibra custos e conveniência, é arquivar dados antigos usando um mecanismo de armazenamento mais barato e mais lento. O meio padrão para armazenamento de dados de backup são as fitas de dados. Elas são muito parecidas com as fitas cassete de áudio, pois usam bobinas de fita magnética que passam por máquinas que gravam e leem dados na fita. O armazenamento em fitas é muito barato, mas não oferece acesso rápido e fácil como dados armazenados em discos rígidos ou unidades de estado sólido. Este sistema de armazenamento é normalmente usado para finalidades arquivísticas de longo prazo, onde a probabilidade do uso dos dados é baixa, quando a demora para obter os dados não é uma preocupação.

O `rsync` não é uma ferramenta de backup, mas é muito usado como tal. É um utilitário de transferência de arquivos projetado para transferir e sincronizar arquivos entre locais ou computadores ele dá suporte a compressão e você pode usar SSH para transferir dados com segurança através de uma rede. Usando o SSH, ele também pode sincronizar arquivos entre máquinas remotas, tornando-o superútil para backups automáticos simples. A Apple tem uma solução de backup disponível para seus OS MAC chamada de Time Machine. Ela opera com o modelo de backup incremental. A Time Machine dá suporte à restauração de todo o sistema ou de arquivos individuais. Ela ainda permite restaurar versões mais antigas dos arquivos de backup. A Microsoft também oferece uma solução chamada "Backup e restauração". Ela tem dois modos de operação, uma versão baseada em arquivos, em que os arquivos copiados para um arquivo zip, com imagem do sistema, onde o disco inteiro é salvo bloco por bloco em um arquivo. O backup baseado em arquivos dá suporte a backups completos ou incrementais. Os backups de imagem do sistema dão suporte ao modo diferencial, fazendo backup apenas dos blocos no disco que foram alterados desde o último backup.

#### Testando backups

Há um último elemento muito importante quando se trata de backups. Os testes. Á área da TI está repleta de casos trágicos de especialistas em suporte e administradores de sistemas que tentaram restaurar dados de um backup após um incidente de perda e descobriram que os backups eram inválidos. **Não é só constrangedor, é aterrorizante.**

O importante aqui é que não basta só configurar backups frequentes. Isso é só metade da equação. A outra metade é o processo de recuperação e ele precisa ser testado regularmente. Os procedimentos de restauração devem ser documentados e acessíveis para que qualquer pessoa com o devido acesso possa restaurar as operações, quando necessário. Não é legal ser chamado em sua folga porque seu colega no escritório não sabe como restaurar o banco de dados SQL a partir do backup, certo? Claro que não. Portanto, documente o procedimento e teste regularmente a documentação para confirmar o funcionamento atual e no futuro. Esse processo é chamado de teste de recuperação de desastre e é fundamental para garantir um bom funcionamento do sistema de recuperação.

O teste de recuperação de desastre deve ser um exercício regular pelo menos uma vez por ano. Deve haver equipes diferentes, incluindo especialistas de suporte, fazendo simulações de eventos de desastre. Deve haver avaliações e testes sobre o preparo ou falta de preparo da sua organização para muitos eventos inesperados. As situações podem variar de um desastre natural simulado, passando por um terremoto fictício até a hipótese de zumbis invadindo o escritório. Se for esse o caso, os backup seriam a menor das suas preocupações. Mas ainda seria importante! Seja qual for o cenário, suas equipes de TI devem testar seus procedimentos de emergência para descobrir o que funciona e, o mais importante, o que não funciona. Esses eventos simulados são a forma perfeita de descobrir qualquer falha no planejamento. Se você descobrir que não está protegido contras perda de dados em determinado cenário, aprenda e corrija essa lacuna sem correr o risco de perder realmente os dados.

##### Tipos de backup

Uma abordagem mais eficiente é fazer backup apenas dos arquivos que são alterados ou que foram criados desde o último backup completo: é o chamado **backup diferencial.** A vantagem é que você não armazenará backups de dados duplicados ou imutáveis, somente os arquivos que foram alterados são incluídos no backup, economizando espaço de armazenamento e tempo para o backup. Mas não é que se deve parar de fazer backups completos. Com o tempo, você acaba rastreando e armazenando muitas cópias de arquivos que mudam muito, e isso ocupa muito espaço no disco ao longo do tempo. Para evitar isso, é recomendável fazer backups completos com pouca frequência e fazer backups diferenciais com mais frequência. A frequência do backup completo depende da amplitude de tempo que você quer rastrear. Imaginemos que façamos backups completos uma vez por semana e backups diferenciais todos os dias. Na pior das hipóteses, perderemos 24 horas de alterações de dados, o que não é ruim.

Outra maneira eficiente de fazer backup de dados que se alteram é fazer regularmente backups incrementais. Enquanto um backup diferencial faz backup de arquivos que foram alterados ou criados, o backup incremental faz backup apenas daquilo que mudou nos arquivos. Ele é ainda mais eficiente em termos de espaço em disco e tempo necessário quando comparado com backups diferenciais. Mais uma vez, você deve usar backups incrementais frequentes juntamente com backs completos menos frequentes. Como esta abordagem reconhece as diferenças nos arquivos que foram alterados desde o último backup incremental, pode haver a necessidade de todos os backups incrementais para reconstruir totalmente os arquivos. Se um desses backups incrementais estiver faltando ou corrompido, pode ficar impossível recuperar dados anteriores ao último backup completo. Outra desvantagem é que a recuperação pode ser mais demorada. Isso ocorre porque a versão mais recente dos dados do backup tem que ser recriada integrando-se o último backup completo com cada backup incremental que foi feito depois. Para arquivos supergrandes que mudam com frequência, pode ser necessários muito tempo para processamento.

Mais uma coisa que os sistemas de backup conseguem fazer para economizar espaço é a compressão de arquivos. Ao criar um backup, todos as estruturas de arquivos e pastas são copiadas e colocadas em um arquivo compactado. Os arquivos compactados são úteis para manter os arquivos organizados e para preservar toda a estrutura. Além de guardar os arquivos, os backups também podem ser compactados: este é um mecanismo para armazenar os mesmos dados exigindo menos espaço em disco e usando algoritmos complexos. São formas complicadas de explicar com detalhes agora, mas é importante chamar a atenção que nem todos os tipos de dados podem ser compactados. Isso significa que a economia de espaço com a compactação dependerá do que está incluído no backup. Outra coisa que você deve saber sobre a compactação de backups é o custo da restauração.

Para recuperar dados de um backup, este precisa ser descompactado primeiro. Dependendo do tamanho dos seus backups, isso pode levar muito tempo e muito espaço em disco. Há uma forma fácil e barata de manter dados de backup em suas instalações. Você pode usar um dispositivo **NAS ou configurar um servidor de arquivos com grande quantidade de espaço em disco.** Onde quer que você escolha armazenar seus dados de backup, você precisará de muito; espaço. Você poderia comprar um HD de 10 terabytes, o que funcionaria durante um período de tempo. Mas o que você faria quando o disco estivesse todo preenchido? Já estão fazendo discos com mais de 10 terabytes? Outra coisa a se pensar é o que fazer se esse disco, com todos os dados de backup, falhar. Vixe! Isso não seria bom.

Estes são problemas que o sistema RAID pode resolver. **RAID significa arranjo redundante de discos independentes**, que é um método de unir vários discos físicos e integrá-los a um grande disco virtual. Existem muitos tipos de configurações RAID, chamadas de níveis. Dependendo das características desejadas, vários níveis de RAID priorizar recursos como desempenho, capacidade ou confiabilidade. Os arranjos RAID são uma forma ótima e barata de criar maior capacidade para dados, minimizando o risco de perda de dados em caso de falha nos discos. Eles permitem até mesmo a ampliação da capacidade dos discos no futuro. Devo enfatizar que o RAID não é uma solução de backup, ele é uma solução de armazenamento de dados com certa disponibilidade de redundância para falhas de disco em alguns dos seus níveis. Mas armazenar dados em um RAID não protege contra a exclusão acidental de arquivos nem contra malware podem corromper seus dados. Isso é tão importante que vou dizer mais uma vez: o RAID não substitui os backups.

###### Backup de usuário

Como especialista em suporte de TI que trabalha em estreita colaboração com usuários da empresa, o assunto "backups de usuários" certamente irá aparecer. Já falamos do backup de dados operacionais críticos, mas e as planilhas e os PDFs do laptop de usuários comuns? Eles querem ter certeza de que não os perderá se o laptop for furtado. Embora seja importante ter uma solução de backup para infraestrutura e sistemas críticos, também devemos pensar nos usuários e em seus valiosos arquivos. Fazer backups confiáveis para dispositivos dos clientes é mais desafiador do que para dispositivos de infraestrutura. É provável que haja muito mais dispositivos clientes para fazer backup em comparação com os de infraestrutura. Além disso, há laptops, telefones e tablets que não estarão no escritório o tempo todo. Uma solução para os backups de usuários é usar um serviço de nuvem para sincronizar e fazer backup de arquivos em plataformas e dispositivos. Alguns dos exemplos são Dropbox, Apple iCloud e Google Drive, que são simples e fáceis de usar. Não há programações ou configurações complicadas em comparação com os backups de infraestrutura. É fácil para os usuários configurarem quais arquivos ou pastas querem mandar para backup e, em seguida, os arquivos são sincronizados com o que está armazenado na nuvem. Como especialista em suporte de TI, isto é muito importante. Quando os usuários derramam acidentalmente uma xícara de café no laptop, eles vão vir até você esperando que suas preciosas fotos de família estejam salvas. Colocar os usuários em sistemas de backup fáceis e eficazes de usar é uma ótima maneira de evitar essa situação.

## Planos de recuperação de desastres

Um plano de recuperação de desastres é um conjunto de procedimentos e planos documentados sobre como reagir e lidar com um cenário de emergência ou desastre a partir da perspectiva operacional. Isso inclui o que deve ser feito antes, durante e depois de um desastre.

O objetivo do plano de recuperação de desastres é minimizar a paralisação dos negócios e das operações de TI, reduzindo ao mínimo o tempo de inatividade dos sistemas e evitando a perda significativa de dados. Apesar do nome, o plano de recuperação de desastres contempla medidas preventivas e medidas de detecção, além da abordagem de recuperação pós-desastre. As medidas preventivas abrangem quaisquer procedimentos ou sistemas em vigor para minimizar proativamente o impacto de um desastre. Estão incluídos backups regulares e sistemas redundantes. Tudo o que é feito antes de um desastre para conseguir reduzir o tempo de inatividade geral do evento é considerado preventivo, a exemplo de um padrão de infraestrutura de rede ou serviço crítico com fontes de alimentação redundantes. Trata-se da alimentação energéticas por diferentes fontes de energia, como se fosse uma bateria reserva. Serve para minimizar o tempo de inatividade causado por falha em uma fonte de alimentação ou falta de energia. Seria uma medida preventiva.

As medidas de detecção servem alertar você e sua equipe de que ocorreu um desastre que pode impactar as operações. Obviamente, você precisa estar ciente do desastre para tomar as medidas apropriadas para reduzir o impacto em sua organização. A notificação na hora certa é essencial, já que algumas etapas do plano de recuperação de desastres podem ser prejudicadas pela demora e podem evitar a perda de dados ou danos aos equipamentos. Se houver uma queda de energia, por exemplo, sistemas críticos devem funcionar à bateria. Mas a bateria só mantêm os sistemas ligados por certo tempo. Para evitar possíveis perdas ou danos aos dados, esses sistemas devem ser desligados corretamente antes de acabar completamente a energia. É por isso que muitos sistemas com suporte para fontes de alimentação redundantes também têm a função de enviar alertas sobre eventos de queda de energia.

Outras coisas que devem ser monitoradas para evitar os desastres inesperados são as condições ambientais dentro das salas de rede. Sensores de inundação podem alertar sobre a entrada de água nos servidores. Sensores de temperatura e umidade podem detectar altas temperaturas ou níveis ideais de umidade no ar. Assim, você pode ficar sabendo de falhas na climatização da sala de servidores. Detectores de fumaça e alarmes de incêndio também são extremamente importantes. Lembre-se de que não é só a tecnologia que é necessária para que a empresa continue operando. Você também precisa das pessoas que trabalham nela. As especificidades de evacuação do edifício geralmente recaem sobre a equipe de gerenciamento do prédio, mas, enquanto especialista em suporte de TI, você deve trabalhar próximo a alguns membros dessa equipe em coisas como: fornecimento de energia, sistemas de aquecimento e resfriamento e evacuação de edifícios. Se houver um incêndio e o prédio precisar ser evacuado, você deve estar preparado para encontrar formas temporárias para que as pessoas ainda possam trabalhar de forma eficaz.

Finalmente, as medidas corretivas ou de recuperação são aquelas adotadas após o desastre ter ocorrido. Essas medidas envolvem etapas como restaurar dados perdidos a partir de backups ou reconstruir e reconfigurar sistemas que foram danificados. Depois que o desastre tiver sido detectado e as medidas tiverem sido tomadas para evitar uma interrupção ou, pelo menos, minimizar o tempo de inatividade, o trabalho deve começar pela restauração das operações.

Normalmente, o desastre danifica parte do sistema de par redundante ou o esquema de replicação que impediria uma interrupção completa do serviço. Mas isso significa não estar preparado para outro desastre. Quando um sistema de par redundante sofre uma falha, chamamos isso de ponto único de falha. Isso porque agora só é preciso uma falha para derrubar completamente o sistema. Essa não é uma situação legal. Falamos dos elementos gerais de um plano de recuperação de desastres.

### Desenvolvendo um plano de recuperação de desastres

Uma boa maneira de entender o que planejar é fazer uma avaliação de riscos. Isso envolve dar analisar com calma as operações e as características de suas equipes. A avaliação de riscos permite priorizar certos aspectos da empresa que apresentam maior risco caso haja um evento imprevisto. A avaliação de riscos pode envolver a simulação de cenários hipotéticos e a análise desses eventos para entender como eles afetariam sua organização e suas operações. Ao analisar as medidas preventivas, preste atenção nos sistemas que não possuem redundância. Quando se tratar de algo crítico para as operações, deve haver redundância por precaução. Tenha sempre um backup sólido e um bom sistema de recuperação, juntamente com uma boa estratégia.

O ideal é fazer backups regulares e automatizados para sistemas no local e externos. Também é muito importante que você tenha procedimentos de recuperação de dados claramente documentados e atualizados. A recuperação de dados após um desastre é algo raro. É importante ter certeza de que esses procedimentos estão atualizados, pois os sistemas mudam e evoluem ao longo de sua vida útil. As redundâncias não devem se limitar apenas aos sistemas. Qualquer coisa fundamental para as operações devem ter redundância sempre que possível. Exemplos são o fornecimento de energia, os sistemas de comunicações, links de dados e hardware. Pense nos impactos que um desastre teria nesses aspectos de suas operações do dia-a-dia. O que aconteceria com sua rede se o prédio ficasse sem energia? Você conseguiria continuar trabalhando com a fibra óptica se o edifício fosse danificado por uma obra nas proximidades? Seu roteador principal explode e pega fogo... Certo. Esta última foi um pouco exagerada, mas acho que você entendeu meu recado.

Outra medida preventiva superimportante é a documentação operacional. Confirme que todos os procedimentos operacionais importantes estejam documentados e acessíveis. Isso inclui configuração de sistemas e de infraestrutura importantes. Todas as etapas ou detalhes de configurações específicos necessários para restaurar 100% da funcionalidade dos principais sistemas e serviços devem estar documentados em detalhes. Também é importante que esta documentação esteja atualizada. Uma boa maneira de fazer isso é verificar periodicamente se as etapas documentadas funcionam. Não é legal se encontrar em uma situação onde você precisa reconfigurar o sistema após um incidente e descobre que a documentação está errada. Ao analisar as medidas de detecção, confirme que você tem um sistema abrangente que consegue detectar rapidamente e alertar você sobre interrupções de serviço ou condições ambientais anormais. Se o tempo de funcionamento e a disponibilidade forem importantes para sua organização, é provável que você tenha duas conexões de Internet; uma primária e uma secundária. Monitorar o status das conexões desses dois links. O ideal é que eles estejam configurados para assumir automaticamente se o outro falhar. Mas mesmo assim você precisa ser alertado quando isso acontecer para que você possa investigar por que o link caiu e trabalhar para recuperá-lo o mais rápido possível.

Uma forma de projetar medidas de detecção é avaliar o que é mais importante para o funcionamento diário da organização. Quais serviços de infraestrutura e acessos são absolutamente vitais? São esses que você deve monitorar de perto. Não são apenas interrupções ou falhas grandes que você deve observar. Claro, você deve monitorá-las também, mas você também tem que monitorar as condições que indicam a probabilidade de ocorrer um problema. Se pudermos evitar uma falha catastrófica sendo alertados sobre o superaquecimento de um servidor antes de ele falhar, seria muito melhor, não seria? Então, você tem monitorar as condições de serviço e dos equipamentos de infraestrutura. Coisas como temperaturas, cargas de CPU e cargas de rede de um serviço, monitoramento de taxas de erro e solicitações por segundo lhe darão um panorama sobre o desempenho do sistema.

Você deve investigar picos incomuns ou aumentos inesperados. Esses sistemas de avisos antecipados permitem antecipar o desastre antes das operações serem afetadas. E, claro, você deve testar esses sistemas. Simule as condições que seus sistemas de monitoramento foram projetados para capturar. Confirme que os pisos de detecção disparam os alertas como deveriam. Esse teste vai além dos sistemas de monitoramento também. Você também deve testar suas reações e as respostas a esses alertas. Se você estiver monitorando sistemas de alertas, mas todas as pessoas os ignoram, eles servirão para nada, correto? Você deve conduzir um teste de desastre regularmente para garantir que os sistemas estejam funcionando e que seus procedimentos para lidar com eles também estejam à altura.

As medidas corretivas ou de recuperação incluem ações que são tomadas para restaurar as operações e para se recuperar de um incidente ou interrupção. Isso inclui etapas como restaurar um banco de dados corrompidos a partir de um backup ou a reconstrução e reconfiguração de um servidor. Seu plano de desastre deve incluir referências ou links para a documentação dessas tarefas: tudo o que seria necessário para restaurar as operações depois de algum desastre. É na documentação que as etapas para restaurar os sistemas e os dados de backups devem estar. Os documentos de recuperação de desastres não precisam conter os detalhes das operações. Links e referências são suficientes. Mas é importante estar preparado para uma situação em que a documentação não esteja disponível. Vamos imaginar que você mantenha toda a sua documentação operacional em um wiki em um servidor dedicado. O que acontecerá se esse servidor sofrer uma interrupção? É importante que a documentação crítica esteja acessível caso uma situação de emergência ou um desastre ocorra.

## O que é um post-mortem

Qual é a finalidade de um relatório de incidente (post mortem)? Criamos um relatório de incidente depois de um incidente, uma interrupção, algum evento que dê errado ou no final de um projeto para analisar como foi. Este relatório documenta, em detalhes, o que exatamente aconteceu antes, durante e após o evento ou projeto. Ele tenta destacar as coisas que correram bem e as coisas que não correram bem.

O objetivo de um relatório de incidente é aprender algo com o evento ou projeto, não punir ninguém nem destacar erros. Provavelmente haverá erros que serão resolvidos, mas a intenção não é punir nem envergonhar, o objetivo é entender a causa-raiz dos erros que aconteceram e impedi-los de acontecer novamente.

O processo de relatório de incidente não acaba quando o relatório é escrito, ele precisa ser comunicado. Esses tipos de relatórios têm valor para além das pessoas imediatas envolvidas no incidente, na investigação e na redação do relatório. Compartilhar os relatórios com outras equipes ajuda a formar uma cultura de aprendizado com os erros, mostra que sua equipe está disposta a reconhecer quando não faz algo certo, mas não deixa se levar pelo erros, dá bom exemplo para os outros seguirem, sem falar que o conteúdo do relatório pode despertar a atenção de outra equipe e fazê-la perceber que ela tem um problema semelhante em sua infraestrutura. Você também pode identificar áreas que podem ser melhoradas e que são de responsabilidade de equipes que não estiveram envolvidas no incidente. Quando se trata de relatórios de incidente, divulgar significa cuidar. Se você fizer relatórios de incidente, eles tendem a fomentar uma cultura onde não há problema em cometer erros. Esta é uma atitude saudável para se ter em qualquer organização. Se as pessoas tiverem medo de cometer erros, a tomada de decisões será sempre muito conservadora. Fica difícil ultrapassar limites e tentar coisas novas se todos tiverem medo de errar. Mas se a cultura disse que não há problema em haver erros desde que possamos aprender com eles, a organização passa a ficar disposta a assumir riscos e experimentar ideias novas e motivantes.

### Redigindo um relatório de incidente

AUm relatório de incidente típico começa com um breve resumo, apenas um pequeno parágrafo que resume o incidente. Deve-se dizer: **qual foi o incidente? Quanto tempo durou? E qual foi o impacto? E como foi corrigido?** Esteja atento ao fuso horário ao listar horários e datas no relatório. Sempre indique claramente o fuso horário para não haver dúvidas.

Em seguida, você precisa de **uma linha do tempo detalhada com os principais eventos.** Deve-se incluir tudo que aconteceu durante o evento, quando começou, quando as pessoas envolvidas foram notificadas ou perceberam o que estava acontecendo etc. Todas as ações tomadas na tentativa de resolver esta situação também devem ser identificadas. Elas podem conter horários e datas junto com fusos horários e quem fez o quê. A linha do tempo deve se encerrar com as ações tomadas que resolveram a interrupção e restauraram os serviços, sinalizando-se o fim do evento.

Em seguida, um relato muito detalhado e verdadeiro das causas básicas descobertas. Deve-se dar detalhes e explicações sobre o que levou ao problema. Pode ser algo como uma alteração de configuração que foi implementada sem o teste adequado ou um comando que foi digitado erroneamente. Lembre-se de que a intenção não é culpar ou envergonhar, o objetivo é ser honesto sobre o que deu errado para que uma lição possa ser aprendida com isso. Se a causa foi a falta de testes, podem-se indicar áreas para melhoria dos testes. Se foi um comando digitado erroneamente, pode-se revelar a necessidade de automatizar um processo manual. Uma explicação mais detalhada da resolução e dos esforços de recuperação deve ser documentada logo em seguida. É algo semelhante à linha do tempo mencionada anteriormente e deve incluir as datas, os horários e os fusos horários. Mas é preciso entrar em mais detalhes sobre quais medidas foram tomadas para a recuperação, a lógica e o raciocínio por trás dessas medidas e qual o resultado de cada uma, para que quem leia o relatório tenha mais contexto sobre como o evento se desenrolou.

Por fim, encerre o relatório com uma lista de ações específicas que devem ser tomadas para evitar que a mesmo situação aconteça novamente. Devem-se incluir quaisquer ações ou esforços destinados a melhorar as respostas também. Etapas para reduzir o tempo de resposta também são úteis. Ao criar uma lista de coisas a serem melhoradas, procure coisas como melhorias nos sistemas de monitoramento. Talvez a investigação do incidente tenha revelado uma lacuna na visibilidade dos sistemas críticos ou a causa investigada aponte que o sistema de automação não esteja funcionando como pretendido.

Embora esteja fora do escopo do relatório de incidente encontrar soluções para essas lacunas, elas devem ser listadas nas áreas a serem melhoradas. Com base nessas descobertas, novas pessoas podem começar a lidar com as deficiências encontradas. Uma coisa que muitas vezes é deixada de lado nos relatórios de incidentes é o que correu bem. É tão importante quanto analisar o que deu errado. Durante a análise pós-incidente, também é bom destacar as coisas que correram bem. Exemplos são sistemas anti-falhas que funcionaram como esperado e impediram uma grande interrupção ou minimizaram a gravidade da indisponibilidade.

Isso ajuda a demonstrar a eficácia dos sistemas atuantes. Para algumas pessoas, como as do setor financeiro, esta é uma boa notícia. Justifica-se qualquer custo associado a esses sistemas comprovando-se um benefício tangível. Isto é importante para qualquer sistema preventivo, pois eles são frequentemente vistos como custos desnecessários por quem não entende bem seus benefícios. Os exemplos de sistemas atuantes para prevenir reduzir o impacto das interrupções tornam esse benefício muito claro. Espero que você esteja mais bem-preparado agora para aprender com os erros que você pode cometer em sua carreira. E os erros serão cometidos porque você é simplesmente humano. Assuma-os, aprenda com eles e faça melhor da próxima vez. Assim é na TI, no trabalho e na vida.
